<template name="AdminReleaseTable">
  <table class="table data-table full-width border-bottom">
    <thead>
    <tr>
      <th></th>
      <th></th>
      <th>Title</th>
      <th>Version Number</th>
      <th>Linked Releases</th>
      <th>Released</th>
      <th>Actual Release Date</th>
      <th>Dev Complete Date</th>
      <th>Internal Release Date</th>
      <th>External Release Date</th>
      <th>Description</th>
      <th></th>
    </tr>
    </thead>
    <tbody>
    {{#each this}}
      <tr class="data-table-row show-controls-on-hover {{#if isOdd @index}}odd{{/if}}" data-pk="{{_id}}">
        <td class="open-link">
          <a class="hidden-control" href="{{pathFor 'AdminRelease' releaseId=_id}}">
            <span class="glyphicon glyphicon-folder-open"></span>
          </a>
        </td>
        <td class="open-link">
          <a class="hidden-control" href="{{pathFor 'Release' releaseId=_id}}">
            <span class="glyphicon glyphicon-home"></span>
          </a>
        </td>
        <td>{{> EditableTextField dataKey="title" value=title emptyText="Title" mode="popup"}}</td>
        <td>{{> EditableTextField dataKey="versionNumber" value=versionNumber emptyText="Version Number" mode="popup" }}</td>
        <td>
          <table class="table linked-release-table">
            <tbody>
            {{#each linkedReleases}}
              <tr>
                <th class="no-wrap">{{project.title}}</th>
                <td class="no-wrap">
                  {{#each releases}}
                    <div>{{name}}</div>
                  {{/each}}
                </td>
              </tr>
            {{/each}}
            </tbody>
          </table>
        </td>
        <td>{{> EditableCheckbox dataKey="isReleased" value=isReleased }}</td>
        <td>
          {{#if isReleased }}
            {{> EditableDate dataKey="releaseDate" value=releaseDate emptyText="Select" }}
          {{/if}}
        </td>
        <td>{{> EditableDate dataKey='devCompleteDate' value=devCompleteDate mode='popup' emptyText='Select Date' }}</td>
        <td>{{> EditableDate dataKey='internalReleaseDate' value=internalReleaseDate mode='popup' emptyText='Select Date' }}</td>
        <td>{{> EditableTextField dataKey='externalReleaseDate' value=externalReleaseDate mode='popup' emptyText='Enter a value' }}</td>
        <td>{{> EditableTextArea dataKey='releaseDescription' value=releaseDescription mode='popup' emptyText='Describe the purpose of this release' }}</td>
        <td>
          <a class="link-red hidden-control btn-delete-release">
            <span class="glyphicon glyphicon-minus-sign"></span>
          </a>
        </td>
      </tr>
    {{/each}}
    </tbody>
  </table>
</template>