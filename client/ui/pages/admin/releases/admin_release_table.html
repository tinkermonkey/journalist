<template name="AdminReleaseTable">
  <table class="table data-table full-width border-bottom">
    <thead>
    <tr>
      <th></th>
      <th></th>
      <th>Title</th>
      <th>Version Number</th>
      <th>Linked Releases</th>
      <th>Released</th>
      <th>Release Date</th>
      <th>Admin Template</th>
      <th>Card Template</th>
      <th>Banner Template</th>
      <th>Home Template</th>
      <th>Reports</th>
      <th></th>
    </tr>
    </thead>
    <tbody>
    {{#each this}}
      <tr class="data-table-row show-controls-on-hover {{#if isOdd @index}}odd{{/if}}" data-pk="{{_id}}">
        <td class="open-link">
          <a class="hidden-control" href="{{pathFor 'AdminRelease' releaseId=_id}}">
            <span class="glyphicon glyphicon-folder-open"></span>
          </a>
        </td>
        <td class="open-link">
          <a class="hidden-control" href="{{pathFor 'Release' releaseId=_id}}">
            <span class="glyphicon glyphicon-home"></span>
          </a>
        </td>
        <td>{{> EditableTextField dataKey="title" value=title emptyText="Title" mode="popup"}}</td>
        <td>{{> EditableTextField dataKey="versionNumber" value=versionNumber emptyText="Version Number" mode="popup" }}</td>
        <td>
          <table class="table linked-release-table">
            <tbody>
            {{#each linkedReleases}}
              <tr>
                <th class="no-wrap">{{project.title}}</th>
                <td class="no-wrap">
                  {{#each releases}}
                    <div>{{name}}</div>
                  {{/each}}
                </td>
              </tr>
            {{/each}}
            </tbody>
          </table>
        </td>
        <td>{{> EditableCheckbox dataKey="isReleased" value=isReleased }}</td>
        <td>
          {{#if isReleased }}
            {{> EditableDate dataKey="releaseDate" value=releaseDate emptyText="Select" }}
          {{/if}}
        </td>
        <td>{{> EditableRecordSelector displayTemplateSelectorContext dataKey="adminTemplate" value=adminTemplate templateType=DisplayTemplateTypes.component mode="popup" }}</td>
        <td>{{> EditableRecordSelector displayTemplateSelectorContext dataKey="cardTemplate" value=cardTemplate templateType=DisplayTemplateTypes.component mode="popup" }}</td>
        <td>{{> EditableRecordSelector displayTemplateSelectorContext dataKey="bannerTemplate" value=bannerTemplate templateType=DisplayTemplateTypes.banner mode="popup" }}</td>
        <td>{{> EditableRecordSelector displayTemplateSelectorContext dataKey="homeTemplate" value=homeTemplate templateType=DisplayTemplateTypes.component mode="popup" }}</td>
        <td>{{> EditableRecordChecklist displayTemplateSelectorContext dataKey="reports" value=reports templateType=DisplayTemplateTypes.report emptyText="Select Reports" mode="popup" }}</td>
        <td>
          <a class="link-red hidden-control btn-delete-release">
            <span class="glyphicon glyphicon-minus-sign"></span>
          </a>
        </td>
      </tr>
    {{/each}}
    </tbody>
  </table>
</template>