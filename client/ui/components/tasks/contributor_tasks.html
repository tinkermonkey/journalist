<template name="ContributorTasks">
  <div class="contributor-tasks show-controls-on-hover" data-pk="{{_id}}">
    <div class="section-header">
      <h3>Tasks</h3>
    </div>
    
    {{#if userManagesContributor _id}}
      <table class="table data-table overhang-table-left">
        {{#each tasks}}
          <tr class="data-table-row" data-pk="{{_id}}">
            <td class="open-link">
              <a class="hidden-control" href="{{pathFor 'Task' taskId=_id}}">
                <span class="glyphicon glyphicon-folder-open"></span>
              </a>
            </td>
            <td>
              {{> EditableTextField dataKey="title" value=title emptyText="Enter Title" }}
            </td>
            <td class="text-right">
              <a class="btn-delete-role link-red hidden-control">
                <span class="glyphicon glyphicon-minus-sign"></span>
              </a>
            </td>
          </tr>
        {{/each}}
      </table>
    {{else}}
      <table class="table data-table overhang-table-left">
        {{#each tasks}}
          <tr class="data-table-row" data-pk="{{_id}}">
            <td class="open-link">
              <a class="hidden-control" href="{{pathFor 'Task' taskId=_id}}">
                <span class="glyphicon glyphicon-folder-open"></span>
              </a>
            </td>
            <td>{{title}}</td>
          </tr>
        {{/each}}
      </table>
    {{/if}}
    
    {{#if userManagesContributor _id}}
      <div>
        <a class="btn-add-task hidden-control">
          <span class="glyphicon glyphicon-plus-sign"></span>
        </a>
      </div>
    {{/if}}
  </div>
</template>